<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>ç½‘ç›˜é¦–é¡µ</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.2.3/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<!-- é¡¶éƒ¨å¯¼èˆª -->
<nav class="navbar navbar-dark bg-primary px-4">
    <a class="navbar-brand" href="#">â˜ï¸ é«˜æ ¡ç½‘ç›˜ç³»ç»Ÿ</a>
    <div class="d-flex text-white align-items-center">
        <span class="me-3" id="navUsername">æ­£åœ¨åŠ è½½...</span>
        <button onclick="logout()" class="btn btn-sm btn-light text-primary">é€€å‡º</button>
    </div>
</nav>

<div class="container mt-5">
    <div class="alert alert-success">
        <h4>ğŸ‰ æ¬¢è¿å›æ¥ï¼</h4>
        <p>ä½ å·²ç»æˆåŠŸç™»å½•ï¼Œè¿™é‡Œæ˜¯ç³»ç»Ÿé¦–é¡µã€‚</p>
        <p>Role B/C/D çš„åŠŸèƒ½å°†åœ¨è¿™é‡Œå±•ç¤ºã€‚</p>
    </div>
</div>

<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script>
    // é¡µé¢åŠ è½½å®Œæˆåï¼Œè¯·æ±‚åç«¯è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
    $(document).ready(function() {
        $.ajax({
            url: '/api/user/info', // ä½ çš„åç«¯æ¥å£
            type: 'GET',
            success: function(res) {
                if (res.code === 200) {
                    $('#navUsername').text(res.data.username);
                } else {
                    alert("ç™»å½•å¤±æ•ˆ");
                    location.href = '/login';
                }
            }
        });
    });

    // é€€å‡ºç™»å½•
    function logout() {
        $.post('/api/user/logout', function() {
            location.href = '/login';
        });
    }
</script>
</body>
</html>